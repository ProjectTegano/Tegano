<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY username "Wolframe Team">
<!ENTITY email "contact@wolframe.net">
<!ENTITY year "2010-2014">
<!ENTITY section "5">
<!-- TITLE should be something like "User commands" or similar (see
	http://www.tldp.org/HOWTO/Man-Page/q2.html). --><!ENTITY dhtitle "Wolframe User Manual">
<!ENTITY dhucpackage "wolframe">
<!ENTITY dhpackage "wolframe.conf">
]>
<!--
************************************************************************

 Copyright (C) 2011 - 2014 Project Wolframe.
 All rights reserved.

 This file is part of Project Wolframe.

 Commercial Usage
    Licensees holding valid Project Wolframe Commercial licenses may
    use this file in accordance with the Project Wolframe
    Commercial License Agreement provided with the Software or,
    alternatively, in accordance with the terms contained
    in a written agreement between the licensee and Project Wolframe.

 GNU General Public License Usage
    Alternatively, you can redistribute this file and/or modify it
    under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Wolframe is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Wolframe.  If not, see <http://www.gnu.org/licenses/>.

 If you have questions regarding the use of this file, please contact
 Project Wolframe.

************************************************************************
-->
<refentry>
	<refentryinfo>
		<title>&dhtitle;</title>
		<productname>&dhpackage;</productname>
		<authorgroup>
			<author>
				<contrib>This manual was written by the Wolframe Team.</contrib>
				<address>
					<email>&email;</email>
				</address>
			</author>
		</authorgroup>
		<copyright>
			<year>&year;</year>
			<holder>&username;</holder>
		</copyright>
		<legalnotice>
			<para>The authors grant permission to copy, distribute and/or modify this manual page
				under the terms of the GNU General Public License Version 3 or newer (GPLv3).
			</para>
		</legalnotice>
	</refentryinfo>
	<refmeta>
		<refentrytitle>&dhucpackage;</refentrytitle>
		<manvolnum>&section;</manvolnum>
	</refmeta>
	<refnamediv>
		<refname>&dhpackage;</refname>
		<refpurpose>Wolframe server configuration file</refpurpose>
	</refnamediv>
	<refsynopsisdiv>
		<cmdsynopsis>
			<command>&dhpackage;</command>
			<!-- These are several examples, how syntaxes could look -->
			<arg choice="plain">
				<option>-e <replaceable>this</replaceable></option>
			</arg>
			<arg choice="opt">
				<option>--example=<parameter>that</parameter></option>
			</arg>
			<arg choice="opt">
				<group choice="req">
					<arg choice="plain">
						<option>-e</option>
					</arg>
					<arg choice="plain">
						<option>--example</option>
					</arg>
				</group>
				<replaceable class="option">this</replaceable>
			</arg>
			<arg choice="opt">
				<group choice="req">
					<arg choice="plain">
						<option>-e</option>
					</arg>
					<arg choice="plain">
						<option>--example</option>
					</arg>
				</group>
				<group choice="req">
					<arg choice="plain">
						<replaceable>this</replaceable>
					</arg>
					<arg choice="plain">
						<replaceable>that</replaceable>
					</arg>
				</group>
			</arg>
		</cmdsynopsis>
		<cmdsynopsis>
			<command>&dhpackage;</command>
			<!-- Normally the help and version options make the programs stop
	   right after outputting the requested information. -->
			<group choice="opt">
				<arg choice="plain">
					<group choice="req">
						<arg choice="plain">
							<option>-h</option>
						</arg>
						<arg choice="plain">
							<option>--help</option>
						</arg>
					</group>
				</arg>
				<arg choice="plain">
					<group choice="req">
						<arg choice="plain">
							<option>-v</option>
						</arg>
						<arg choice="plain">
							<option>--version</option>
						</arg>
					</group>
				</arg>
			</group>
		</cmdsynopsis>
	</refsynopsisdiv>
	<!--
;
;Wolframe configuration file

LoadModules	{						; modules to be loaded by the server
	module modules/PostgreSQL/mod_db_postgresql.so.0.0.0
	module modules/SQLite/mod_db_sqlite3.so.0.0.0

	module modules/audit/database/mod_audit_database.so.0.0.0
	module modules/audit/textfile/mod_audit_textfile.so.0.0.0
	module modules/authentication/database/mod_auth_database.so.0.0.0
	module modules/authentication/textfile/mod_auth_textfile.so.0.0.0

	module modules/processor/echo/mod_proc_echo.so.0.0.0

}

ServerTokens		OS					; print the application name and
								; version in the initial greeting
								; allowed values are:
								;   ProductOnly, Major, Minor,
								;   Revision, OS, None
ServerSignature		On					; print the name of the server as
								; first element of the greeting

; Unix daemon parameters. This section is not valid for windows
daemon {
;	user		nobody
;	group		nobody
	pidFile		/tmp/wolframed.pid
}

; Windows service parameters (for service registration). This section is not valid on non-Windows OSes
service {
	serviceName	wolframe
	displayName	"Wolframe Daemon"
	description	"a daemon for howling"
}


; Ports 7649-7671 and 7934-7966 are unassigned according to IANA (last updated 2010-03-11).
; Let's use 7660 for unencrypted connections and 7960 for SSL connections.
; Note that 7654 seems to be used by Winamp.
listen	{
	maxConnections	3					; Maximum number of simultaneous connections (clients).
								; Default is the OS limit. This is the global (total) value.
								; Set it to 0 to disable (to use the system limit)
	threads		7					; Number of threads for serving client connections.
								; Default 4
	socket	{
		address		*
		port		7661
		maxConnections	2				; Maximum number of simultaneous connections (clients)
								; for this socket. Default is the OS limit.
	}
	socket	{
		address		localhost
;		address		::1
		port		7662
		name		"Interface 1"			; Interfaces can be named for AAA purposes
	}

	SSLsocket	{
		address		0.0.0.0
		port		7961
		name		"Interface 1"			; Many interfaces can have the same name and
								; they can be referred as one group in AAAA
		; SSL parameters: required if SSLsocket is defined
		certificate	../tests/SSL/wolframed.crt	; Server certificate file (PEM)
		key		../tests/SSL/wolframed.key	; Server key file (PEM)
		CAdirectory	../tests/SSL/CAdir		; Directory holding CA certificate files
		CAchainFile	../tests/SSL/CAchain.pem	; SSL CA chain file
		verify		ON				; Require and verify client certificate
	}
	SSLsocket	{
		address		127.0.0.1
		port		7962
		name		"Interface 2"
		maxConnections	2
		certificate	../tests/SSL/wolframed.crt
		key		../tests/SSL/wolframed.key
		; CAdirectory	../tests/SSL/CAdir		; It's not necessary to define both
		CAchainFile	../tests/SSL/CAchain.pem	; CAdirectory and CAchainFile.
		verify		OFF
	}
}


; Database configuration
database	{
	PostgreSQL	{					; PostgreSQL database.
		identifier	pgdb				; Database identifier. Used by other definitions.
		host		localhost			; Database host. Uses the unix socket if not defined.
		port		5432				; Database port. Uses the default port if not defined.
		name		wolframe			; Database name.
		user		wolframe			; Database user.
		password	blabla				; Password for the database user.
		connectionTimeout 10				; connection timeout in seconds
								; 0 to disable, default 30s
		connections	5				; number of parallel connections to the database
								; Default is 4
		acquireTimeout	10				; maximum allowed time to acquire a database
								; connection
	}

	SQLite	{
		identifier	sqlitedb			; All databases defined independently must have
								; an identifier
;		file		/var/lib/wolframe/primary.db	; SQLite database file
		file		primary.db
	}
}


; Logging configuration
logging	{
	; log level for console (stderr) logging
	stderr	{
		level	INFO
	}

	; log level for file logging
	logFile	{
		filename	/tmp/wolframed.log
		level		NOTICE
	}

	; syslog facility, identifier and log level
	syslog	{
		ident		wolframed
		facility	LOCAL2
		level		INFO
	}

	; eventlog source and log level. Valid only on Windows
	eventlog	{
		name		Wolframe
		source		wolframed
		level		INFO
	}
}

; Authentication, authorization, accounting and auditing configuration
aaaa	{
	authentication	{
		allowAnonymous	yes
		database	pgdb
;		database	sqlitedb
	}

	audit	{
		file		../var/tmp/wolframe.audit
		database	sqlitedb
	}
	; There are no configurations for authorization and accounting
	; as authorization uses the authentication information and the
	; server database and accounting should be derived from audit
	; information
}

; The thing that does the real job ;)
Processor	{
	database		pgdb
;	database		sqlitedb
	EchoProcessor	{
		timeout		10
	}
}

-->
	<refsect1 id="description">
		<title>DESCRIPTION</title>
		<para>This manual page documents briefly the
      <command>&dhpackage;</command> and <command>bar</command>
      commands.</para>
		<para>This manual page was written for the Debian distribution
      because the original program does not have a manual page.
      Instead, it has documentation in the GNU <citerefentry><refentrytitle>info</refentrytitle><manvolnum>1</manvolnum></citerefentry> format; see below.</para>
		<para><command>&dhpackage;</command> is a program that...</para>
	</refsect1>
	<refsect1 id="options">
		<title>OPTIONS</title>
		<para>The program follows the usual GNU command line syntax,
      with long options starting with two dashes (`-').  A summary of
      options is included below.  For a complete description, see the
      <citerefentry><refentrytitle>info</refentrytitle><manvolnum>1</manvolnum></citerefentry> files.</para>
		<variablelist>
			<!-- Use the variablelist.term.separator and the
	   variablelist.term.break.after parameters to
	   control the term elements. -->
			<varlistentry>
				<term>
					<option>-e <replaceable>this</replaceable></option>
				</term>
				<term>
					<option>--example=<replaceable>that</replaceable></option>
				</term>
				<listitem>
					<para>Does this and that.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>
					<option>-h</option>
				</term>
				<term>
					<option>--help</option>
				</term>
				<listitem>
					<para>Show summary of options.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>
					<option>-v</option>
				</term>
				<term>
					<option>--version</option>
				</term>
				<listitem>
					<para>Show version of program.</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</refsect1>
	<refsect1 id="files">
		<title>FILES</title>
		<variablelist>
			<varlistentry>
				<term>
					<filename>/etc/foo.conf</filename>
				</term>
				<listitem>
					<para>The system-wide configuration file to control the
	    behaviour of <application>&dhpackage;</application>. See
	    <citerefentry><refentrytitle>foo.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> for further details.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>
					<filename>${HOME}/.foo.conf</filename>
				</term>
				<listitem>
					<para>The per-user configuration file to control the
	     behaviour of <application>&dhpackage;</application>. See
	     <citerefentry><refentrytitle>foo.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> for further details.</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</refsect1>
	<refsect1 id="environment">
		<title>ENVIONMENT</title>
		<variablelist>
			<varlistentry>
				<term>
					<envar>FOO_CONF</envar>
				</term>
				<listitem>
					<para>If used, the defined file is used as configuration
	    file (see also <xref linkend="files"/>).</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</refsect1>
	<refsect1 id="diagnostics">
		<title>DIAGNOSTICS</title>
		<para>The following diagnostics may be issued
      on <filename class="devicefile">stderr</filename>:</para>
		<variablelist>
			<varlistentry>
				<term>
					<errortext>Bad configuration file. Exiting.</errortext>
				</term>
				<listitem>
					<para>The configuration file seems to contain a broken configuration
	    line. Use the <option>--verbose</option> option, to get more info.
	  </para>
				</listitem>
			</varlistentry>
		</variablelist>
		<para><command>&dhpackage;</command> provides some return codes, that can
      be used in scripts:</para>
		<segmentedlist>
			<segtitle>Code</segtitle>
			<segtitle>Diagnostic</segtitle>
			<seglistitem>
				<seg>
					<errorcode>0</errorcode>
				</seg>
				<seg>Program exited successfully.</seg>
			</seglistitem>
			<seglistitem>
				<seg>
					<errorcode>1</errorcode>
				</seg>
				<seg>The configuration file seems to be broken.</seg>
			</seglistitem>
		</segmentedlist>
	</refsect1>
	<refsect1 id="bugs">
		<!-- Or use this section to tell about upstream BTS. -->
		<title>BUGS</title>
		<para>The program is currently limited to only work
      with the <package>foobar</package> library.</para>
		<para>The upstreams <acronym>BTS</acronym> can be found
      at <ulink url="http://bugzilla.foo.tld"/>.</para>
	</refsect1>
	<refsect1 id="see_also">
		<title>SEE ALSO</title>
		<!-- In alpabetical order. -->
		<para><citerefentry><refentrytitle>bar</refentrytitle><manvolnum>1</manvolnum></citerefentry>, <citerefentry><refentrytitle>baz</refentrytitle><manvolnum>1</manvolnum></citerefentry>, <citerefentry><refentrytitle>foo.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry></para>
		<para>The programs are documented fully by <citetitle>The Rise and
      Fall of a Fooish Bar</citetitle> available via the <citerefentry><refentrytitle>info</refentrytitle><manvolnum>1</manvolnum></citerefentry> system.</para>
	</refsect1>
</refentry>
