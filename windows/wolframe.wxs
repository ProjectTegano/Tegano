<?xml version='1.0'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
	<Product Name='Wolframe' Version='0.0.1' Manufacturer='Wolframe Team'
	         Language='1033' Codepage='1252'
	         Id='{09E1E9CC-6AE6-4207-B7FE-F47CFDB2861F}' 
	         UpgradeCode='{64361569-C468-42DE-95A1-901DDDE84D13}' >
		<Package Description='Wolframe Windows Installer Package'
		         Comments='The Wolframe framework'
		         Manufacturer='Wolframe Team' InstallerVersion='200' Compressed='yes' />

		<Media Id='1' Cabinet='wolframe.cab' EmbedCab='yes' />
		
		<Directory Id='TARGETDIR' Name='SourceDir'>
			<!-- TODO: 32-bit/64-bit switch -->
			<Directory Id='ProgramFilesFolder' Name='PFiles'>
				<Directory Id='WolframeGroup' Name='Wolframe Group'>
					<Directory Id='INSTALLDIR' Name='Wolframe'>
						<Component Id='License' Guid='{6999FF89-95FC-4E6B-867B-7AC19839284E}'>
							<File Id='license' Name='license.rtf' DiskId='1' Source='license.rtf' />
						</Component>
						<Directory Id='BinDir' Name='bin'>
							<Component Id='ServiceBinary' Guid='{112265CD-F35C-49B5-A4A1-F685B32BC208}'>
								<File Id='wolframed' Name='wolframed.exe' DiskId='1' Source='..\src\wolframed.exe' />
							</Component>
						</Directory>
					</Directory>
				</Directory>
			</Directory>
			
			<Directory Id="ProgramMenuFolder">
				<Directory Id="ApplicationProgramsFolder" Name="Wolframe"/>
			</Directory>
			
		</Directory>

		<DirectoryRef Id="ApplicationProgramsFolder">
			<Component Id="ApplicationShortcut" Guid="{989CD261-D90C-4AEA-80BA-E1EB9931B2F8}">
				<util:InternetShortcut Id="WolframeHomePage"
				                       Name="Wolframe Home Page"
				                       Target="http://www.wolframe.net/"/>
				<RemoveFolder Id="ApplicationProgramsFolder" On="uninstall"/>
				<RegistryValue Root="HKCU" Key="Software\WolframeGroup\Wolframe"
				               Name="installed" Type="integer" Value="1" KeyPath="yes"/>
			</Component>
		</DirectoryRef>


		<Feature Id='Complete' Title='Complete' Description='The complete package.'
		         Display='expand' Level='1' ConfigurableDirectory='INSTALLDIR'>
			<Feature Id='MainProgram' Title='Program' Description='The main executable.' Level='1'>
				<ComponentRef Id='License' />
				<ComponentRef Id='ServiceBinary' />
				<ComponentRef Id="ApplicationShortcut" />
			</Feature>
			
			<Feature Id='Documentation' Title='Manual' Description='The Wolbones usage manual.' Level='1000'>
			</Feature>

			<Feature Id='SDK' Title='SDK' Description='The programming SDK.' Level='1000'>
			</Feature>

		</Feature>
		
		<WixVariable Id="WixUILicenseRtf" Value="license.rtf" />
		
		<UIRef Id="WixUI_Mondo" />
		<UIRef Id="WixUI_ErrorProgressText" />

	</Product>
</Wix>
