; Wolframe main configuration file

; Modules to be loaded (bundled with the wolframe core package)
LoadModules {

; Search also for modules in the following directory additionally to
; the default load dir (with lower priority). Can be absolute or relative,
; if relative it has this configuration file as basis to compute the path
;    Directory modules

; database modules
;    Module mod_db_postgresql
;    Module mod_db_sqlite3

; authentication modules
    Module mod_auth_textfile
    Module mod_auth_database
; enable or disable the authentication methods you need
;    Module mod_auth_pam
;    Module mod_auth_sasl

; authorization modules
    Module mod_authz_database
    Module mod_command_aamap

; audit modules    
    Module mod_audit_textfile
    Module mod_audit_database

; modules for detecting document types    
    Module mod_doctype_xml
    Module mod_doctype_json

; modules for XML processing

; XML processing using textwolf
    Module mod_filter_textwolf
    Module mod_filter_char
    Module mod_filter_line
    Module mod_filter_token

; XML processing using libxml2
;    Module mod_filter_libxml2

; JSON processing using cjson
    Module mod_filter_cjson
    
    Module mod_normalize_locale
    Module mod_normalize_string
    Module mod_normalize_base64
    Module mod_normalize_number
	
    Module mod_datatype_datetime
    Module mod_datatype_bcdnumber
	
    Module mod_command_directmap
    Module mod_ddlcompiler_simpleform
    Module mod_command_tdl

; module for parsing BLOBs
    Module mod_filter_blob
    
    Module mod_job_schedule_db
}

; Print the application name and version in the initial greeting
; allowed values are: ProductOnly, Major, Minor, Revision, OS, None
; Default: None
ServerTokens OS					

; Print the name of the server as first element of the greeting
; Default: empty
ServerSignature "Wolframe"

; Unix daemon parameters

Daemon {

; user and group to run the daemon

    User wolframe
    Group wolframe

; daemon lockfile

    PidFile /var/run/wolframe/wolframed.pid
}

; SQLite3 database configuration

Database {
    SQLite {
        Identifier db

; SQLite database file

        File /srv/wolframe
        
; enable / disable referential integrity
; Default: yes

        ForeignKeys yes

; enable disable profiling on database operations
; Default: no

        Profiling no
        
; number of parallel connections to the database
; Default: 4

        Connections 4
        
; extensions to be loaded
;        Extension extension_module.so

    }
}

; Postgresql database configuration

database	{
	PostgreSQL	{					; PostgreSQL database.
		identifier	pgdb				; Database identifier. Used by other definitions.
		host		localhost			; Database host. Uses the unix socket if not defined.
		port		5432				; Database port. Uses the default port if not defined.
		database	wolframe			; Database name.
		user		wolfusr				; Database user.
		password	wolfpwd				; Password for the database user.
		connectionTimeout 10				; connection timeout in seconds
								; 0 to disable, default 30s
		connections	4				; number of parallel connections to the database
								; Default is 4
		acquireTimeout	10				; maximum allowed time to acquire a database
								; connection in seconds.
		sslMode		prefer				; how should a SSL TCP/IP connection be negotiated with the server
								; Possible values:
								;   disable	only try a non-SSL connection
								;   allow	first try a non-SSL connection;
								;		if that fails, try an SSL connection
								;   prefer 	default. first try an SSL connection;
								;		if that fails, try a non-SSL connection
								;   require	only try an SSL connection.
								;		If a root CA file is present, verify the certificate
								;   verify-ca	only try an SSL connection, and verify that the server
								;		certificate is issued by a trusted CA
								;   verify-full	only try an SSL connection, verify that the server
								;		certificate is issued by a trusted CA and that
;								;		the server hostname matches that in the certificate
;		sslCert		../tests/SSL/wolframed.crt	; the file name of the client SSL certificate
;		sslKey		../tests/SSL/wolframed.key	; the secret key used for the client certificate
;		sslRootCert	../tests/SSL/CAchain.pem	; file name of the root SSL CA certificate
;		sslCRL						; file name of the SSL certificate revocation list (CRL)
;		statementTimeout 30000				; maximum allowed time to execute a statement
;								; NOTE: this timeout is in milliseconds
	}
}
